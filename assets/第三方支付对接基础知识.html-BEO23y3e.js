import{_ as e,o as a,c as l,a as i}from"./app-oJgUVX7T.js";const n={},t=i('<h1 id="第三方支付对接基础知识" tabindex="-1"><a class="header-anchor" href="#第三方支付对接基础知识"><span>第三方支付对接基础知识</span></a></h1><h2 id="服务模式" tabindex="-1"><a class="header-anchor" href="#服务模式"><span>服务模式</span></a></h2><p>直连模式和服务商模式。</p><p>直连模式：商户直接对接微信或者支付宝，需要对接所有的接口。</p><p>服务商模式：提供商户号给你的服务器，即可使用。即子商户申请的appid和mchid提供给服务商。</p><h2 id="下单和支付" tabindex="-1"><a class="header-anchor" href="#下单和支付"><span>下单和支付</span></a></h2><p>支付功能是基于业务的基础上进行，所以先业务下单。</p><blockquote><p>一些系统有可能下单和支付是一个事务内进行，并不区别业务订单和支付订单。例如扫描支付。</p></blockquote><h2 id="下单未支付" tabindex="-1"><a class="header-anchor" href="#下单未支付"><span>下单未支付</span></a></h2><p>最简单的处理：每次下单生成一笔新的订单，原来的那个订单就当做废订单。</p><h2 id="支付回调" tabindex="-1"><a class="header-anchor" href="#支付回调"><span>支付回调</span></a></h2><ol><li>分布式锁保证处理逻辑</li><li>RabbitMQ进行解耦</li></ol><h2 id="退款" tabindex="-1"><a class="header-anchor" href="#退款"><span>退款</span></a></h2><ol><li>执行退款逻辑之前，先调一下第三方的查询确认状态接口，对方没有那么你必须要求他们提供，只有保证对方明确可以退。</li><li>单独记录退款数据。</li><li>退款是有时限的，例如微信和支付宝是不同的。</li></ol><h2 id="对账" tabindex="-1"><a class="header-anchor" href="#对账"><span>对账</span></a></h2><p>对账的方法是调微信、支付宝、第三方（如果有）的账单接口，拉取到账单然后进行订单的比对，计算出长款多少，短款多少。</p><h2 id="聚合支付" tabindex="-1"><a class="header-anchor" href="#聚合支付"><span>聚合支付</span></a></h2><p>一码多付，根据扫码的浏览器AGENT进行下单。</p><blockquote><p>https://juejin.cn/post/7287036223541379126</p></blockquote>',19),h=[t];function s(c,r){return a(),l("div",null,h)}const d=e(n,[["render",s],["__file","第三方支付对接基础知识.html.vue"]]),o=JSON.parse('{"path":"/pay/%E7%AC%AC%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98%E5%AF%B9%E6%8E%A5%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html","title":"第三方支付对接基础知识","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"服务模式","slug":"服务模式","link":"#服务模式","children":[]},{"level":2,"title":"下单和支付","slug":"下单和支付","link":"#下单和支付","children":[]},{"level":2,"title":"下单未支付","slug":"下单未支付","link":"#下单未支付","children":[]},{"level":2,"title":"支付回调","slug":"支付回调","link":"#支付回调","children":[]},{"level":2,"title":"退款","slug":"退款","link":"#退款","children":[]},{"level":2,"title":"对账","slug":"对账","link":"#对账","children":[]},{"level":2,"title":"聚合支付","slug":"聚合支付","link":"#聚合支付","children":[]}],"git":{"updatedTime":1698818603000,"contributors":[{"name":"拔土豆的程序员","email":"lizhifuabc@163.com","commits":1}]},"filePathRelative":"pay/第三方支付对接基础知识.md"}');export{d as comp,o as data};

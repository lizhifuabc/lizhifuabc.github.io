import{_ as t,o as a,c as e,a as d}from"./app-oJgUVX7T.js";const i={},l=d('<h1 id="saas多租户数据隔离" tabindex="-1"><a class="header-anchor" href="#saas多租户数据隔离"><span>SaaS多租户数据隔离</span></a></h1><p>租户给SaaS平台付租金就能使用平台提供的功能服务。</p><h2 id="隔离方案" tabindex="-1"><a class="header-anchor" href="#隔离方案"><span>隔离方案</span></a></h2><ul><li><p>一个租户一个数据库，或者将一群租户统一放在一个数据库里</p><p>一个租户一个数据库，此时SaaS系统需要连接多个数据库，这种实现方案其实就和分库分表架构设计是一样的，好处就是数据隔离级别高、安全性好，毕竟一个租户单用一个数据库，但是物理硬件成本，维护成本也变高了。</p></li><li><p>共享数据库、不同的数据表：独立的表空间</p><p>所有租户共用一个数据库系统，但是每个租户在数据库系统中拥有一个独立的表空间。Schema隔离使用PostgreSQL来实现非常简单，因为他天生支持这种方式，具体可以去PostgreSQL了解。</p></li><li><p>共享数据库、共享数据表：按租户id字段隔离租户（使用较多）</p><p>最简单的数据隔离方法，即在每张表中都添加一个用于区分租户的字段（如tenant_id或org_id啥的）来标识每条数据属于哪个租户，当进行查询的时候每条语句都要添加该字段作为过滤条件，其特点是所有租户的数据全都存放在同一个表中，数据的隔离性是最低的，完全是通过字段来区分的，很容易把数据搞串或者误操作。</p></li></ul><table><thead><tr><th>隔离方案</th><th>成本</th><th>支持租户数量</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>独立数据库系统</td><td>高</td><td>少</td><td>数据隔离级别高，安全性，可以针对单个租户开发个性化需求</td><td>数据库独立安装，物理成本和维护成本都比较高</td></tr><tr><td>独立的表空间</td><td>中</td><td>较多</td><td>提供了一定程度的逻辑数据隔离，一个数据库系统可支持多个租户</td><td>数据库管理比较困难，表繁多，同时数据修复稍复杂</td></tr><tr><td>按租户id字段区分</td><td>低</td><td>多</td><td>维护和购置成本最低，每个数据库能够支持的租户数量最多</td><td>隔离级别最低，安全性也最低</td></tr></tbody></table><h2 id="实现方案" tabindex="-1"><a class="header-anchor" href="#实现方案"><span>实现方案</span></a></h2><ol><li>mybatis-plus</li><li>mybatis-flex</li><li>基于mybatis拦截器统一处理表的路由</li></ol><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><p>如果应用规模进一步扩大，租户数量在持续增加，应用服务器层和数据库层都在持续地水平扩展。但是由于其彼此之间没有任何对应关系，导致所有的应用服务器要与所有的数据库服务器关联(以m 台应用服务器和n 台数据库服务器为例，它们之间的关联有 mxn 个，也是就是每台应用服务器至少要有n个数据库链接 )。</p><p>所有的应用服务器不应该是完全平等的，应该与数据库服务器对应。也就是说，不同的租户可能不仅有不同的应用服务器，还有可能有不同的数据库服务器。每组应用服务器都仅连接对应的数据库服务器。</p>',10),s=[l];function n(h,r){return a(),e("div",null,s)}const p=t(i,[["render",n],["__file","SaaS多租户数据隔离.html.vue"]]),o=JSON.parse('{"path":"/design/business/SaaS%E5%A4%9A%E7%A7%9F%E6%88%B7%E6%95%B0%E6%8D%AE%E9%9A%94%E7%A6%BB.html","title":"SaaS多租户数据隔离","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"隔离方案","slug":"隔离方案","link":"#隔离方案","children":[]},{"level":2,"title":"实现方案","slug":"实现方案","link":"#实现方案","children":[]},{"level":2,"title":"其他","slug":"其他","link":"#其他","children":[]}],"git":{"updatedTime":1698818603000,"contributors":[{"name":"拔土豆的程序员","email":"lizhifuabc@163.com","commits":1}]},"filePathRelative":"design/business/SaaS多租户数据隔离.md"}');export{p as comp,o as data};

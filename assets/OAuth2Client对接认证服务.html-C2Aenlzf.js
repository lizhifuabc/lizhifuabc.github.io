import{_ as o,r as a,o as s,c as l,b as e,e as t,d as r,a as n}from"./app-oJgUVX7T.js";const c="/assets/image-20231220150034474-BosnJP2-.png",p={},h=n(`<h1 id="oauth2-client对接认证服务" tabindex="-1"><a class="header-anchor" href="#oauth2-client对接认证服务"><span>OAuth2 Client对接认证服务</span></a></h1><p>项目在初始化时会根据配置的issuer-uri拼接url，即签发地址根目录/.well-known/openid-configuration，像项目中配置的就是该接口会返回认证服务器的元信息。</p><div class="language-web-idl line-numbers-mode" data-ext="web-idl" data-title="web-idl"><pre class="language-web-idl"><code>http<span class="token operator">:</span><span class="token comment">//127.0.0.1:9000/.well-known/openid-configuration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+c+'" alt="image-20231220150034474"></p><h2 id="cookie-问题" tabindex="-1"><a class="header-anchor" href="#cookie-问题"><span>cookie 问题</span></a></h2>',5),d={href:"https://github.com/spring-projects/spring-security/issues/5946",target:"_blank",rel:"noopener noreferrer"},u=n('<p>可以一个使用 192.168.18.14:9001（内网）一个使用 127.0.0.1</p><h2 id="客户端" tabindex="-1"><a class="header-anchor" href="#客户端"><span>客户端</span></a></h2><p>客户端在oauth2角色解释中是第三方的一个应用，一般会配合资源服务一起使用。</p><p>单体项目</p><ul><li>会同时添加资源服务依赖，客户端负责调用认证服务登录，资源服务器负责解析获取到的token，然后获取token中的权限，目前token中的权限只有scope的权限，并且不太好自定义，所以就需要通过资源服务器配置去更好的解析token。</li></ul><p>分布式项目：</p><ul><li>在网关中添加客户端依赖，检查用户认证信息，由网关代理的微服务添加资源服务依赖，解析网关通过令牌中继的方式携带的access_token；各个微服务添加自己的授权校验。</li><li>在网关中集成客户端依赖，同时集成资源服务依赖，由网关检查用户的认证和授权信息；各个微服务不用添加任何的认证与授权相关的处理，可以直接访问；这种方式需要屏蔽各微服务其它ip的访问，只能由网关代理访问。</li></ul>',7);function m(_,g){const i=a("ExternalLinkIcon");return s(),l("div",null,[h,e("p",null,[t("认证服务器和客户端在同一个机器上时不能使用同一个ip。"),e("a",d,[t("Not able to connect Spring OAuth2 Authorization Server with Client · Issue #5946 · spring-projects/spring-security (github.com)"),r(i)])]),u])}const b=o(p,[["render",m],["__file","OAuth2Client对接认证服务.html.vue"]]),f=JSON.parse('{"path":"/spring/springBoot/OAuth2Client%E5%AF%B9%E6%8E%A5%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1.html","title":"OAuth2 Client对接认证服务","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"cookie 问题","slug":"cookie-问题","link":"#cookie-问题","children":[]},{"level":2,"title":"客户端","slug":"客户端","link":"#客户端","children":[]}],"git":{"updatedTime":1704446575000,"contributors":[{"name":"拔土豆的程序员","email":"lizhifuabc@163.com","commits":1}]},"filePathRelative":"spring/springBoot/OAuth2Client对接认证服务.md"}');export{b as comp,f as data};
